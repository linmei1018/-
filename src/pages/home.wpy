<template>
	<view id="PosterPage">
		<view class="share__title">Wxml:</view>
	    <view class="share__canvas share__canvas1">
	        <view class="share__canvas1-text draw_canvas" data-type="text" data-text="这是一段无边距文字">这是一段无边距文字</view>
	        <view class="share__canvas1-text-2 draw_canvas" data-type="text" data-text="这是一段margin文字">这是一段margin文字</view>
	        <view class="share__canvas1-text-3 draw_canvas" data-type="inline-text" data-text="这是一段padding文字">这是一段padding文字</view>
	        <view class="share__canvas1-text-4 draw_canvas" data-type="text" data-text="这是一段居中有背景文字">这是一段居中有背景文字</view>
	        <view class="share__canvas1-text-5 draw_canvas" data-type="text" data-text="这是一段背景文字" data-background="rgba(255, 0, 0, 0.4)" data-padding="0 0 0 0">这是一段背景文字</view>
	    </view>
	    <view class="share__title">Canvas:</view>
	    <canvas canvas-id="canvas1" class="share__canvas"></canvas>

	    <view class="share__title">Wxml:2</view>
	    <view class="share__canvas share__canvas2">
	        <image class="share__canvas2-image draw_canvas" data-type="image" data-url="../images/bg.png" src="../images/bg.png"></image>
	        <image class="share__canvas2-image-2 draw_canvas" data-type="radius-image" data-url="../images/bg.png" src="../images/bg.png"></image>
	        <image class="share__canvas2-image-2 draw_canvas" data-type="radius-image" data-url="../images/bg.png" src="../images/bg.png"></image>
	    </view>
	    <view class="share__title">Canvas: </view>
	    <canvas canvas-id="canvas2" class="share__canvas"></canvas>
	
		<view class="share__title">Wxml: 3</view>
	    <view class="share__canvas share__canvas3">
	        <view class="share__canvas3-inline draw_canvas" data-type="inline-text" data-text="这是一段行内文字">这是一段行内文字</view>
	        <view class="share__canvas3-inline share__canvas3-inline_bold draw_canvas" data-type="inline-text" data-text="这是一段加粗行内文字试试">这是一段加粗行内文字试试</view>
	        <view class="share__canvas3-inline draw_canvas" style="color: red" data-type="inline-text" data-text="这是一段换行文字">这是一段换行文字</view>
	        <view class="share__canvas3-inline draw_canvas" data-type="inline-text" data-text="这是一段很长很长很长很长很长很长很长很长很长很长很长很长的换行文字">这是一段很长很长很长很长很长很长很长很长很长很长很长很长的换行文字</view>
	        <view class="share__canvas3-inline draw_canvas" data-type="inline-text" data-text="这是一段换行文字">这是一段换行文字</view>
	        <view class="share__canvas3-inline draw_canvas" style="color: blue" data-type="inline-text" data-text="这是一段换了行的结束文字">这是一段换了行的结束文字</view>
	        <image src="../images/emoji.png" class="share__canvas-emoji draw_canvas" data-type="inline-image" data-url="../images/emoji.png"></image>
	        <image src="../images/emoji.png" class="share__canvas-emoji draw_canvas" data-type="inline-image" data-url="../images/emoji.png"></image>
	        <image src="../images/emoji.png" class="share__canvas-emoji draw_canvas" data-type="inline-image" data-url="../images/emoji.png"></image>
	        <view class="share__canvas3-inline draw_canvas" data-type="inline-text" data-text="这是一段行内文字这是一段行内文字">这是一段行内文字这是一段行内文字</view>
	    </view>
	    <view class="share__title">Canvas: </view>
	    <canvas canvas-id="canvas3" class="share__canvas"></canvas>

	     <view class="share__title">Wxml:4</view>
	    <view class="share__canvas share__canvas4">
	        <view class="share__canvas4-block draw_canvas" data-type="text" data-text="Wxml2Cavnas库，是一个生成小程序分享图的通用方案，提供了两种绘制方式：">Wxml2Cavnas库，是一个生成小程序分享图的通用方案，提供了两种绘制方式：</view>
	        <view class="share__canvas4-block draw_canvas" data-type="text" data-text="封装基础图形的绘制接口，包括矩形、圆形、线条、图片、圆角图片、纯文本等，使用时只需要声明元素类型并提供关键数据即可，不需要再关注canvas的具体绘制过程；">封装基础图形的绘制接口，包括矩形、圆形、线条、图片、圆角图片、纯文本等，使用时只需要声明元素类型并提供关键数据即可，不需要再关注canvas的具体绘制过程；</view>
	        <image src="../images/bg.png" class="share__canvas4-image draw_canvas" data-type="image" data-url="../images/bg.png"></image>
	        <view class="share__canvas4-block draw_canvas" data-type="text" data-text="wxml直接转换成canvas元素，使用时传入待绘制的wxml节点的class类名，并且声明绘制此节点的类型（图片、文字等），会自动读取此节点的computedStyle，利用这些数据完成元素的绘制。">wxml直接转换成canvas元素，使用时传入待绘制的wxml节点的class类名，并且声明绘制此节点的类型（图片、文字等），会自动读取此节点的computedStyle，利用这些数据完成元素的绘制。</view>
	    </view>
	    <view class="share__title">Canvas: 4</view>
    	<canvas canvas-id="canvas4" class="share__canvas share__canvas4"></canvas>

    	<view class="share__title">Wxml: 5</view>
	    <view class="share__canvas share__canvas5">
	        <image class="share__canvas5-image draw_canvas" data-type="image" data-url="../images/bg.png" src="../images/bg.png"></image>
	        <view class="share__canvas5-text draw_canvas" data-type="text" data-text="这是一段无边距文字">这是一段无边距文字</view>
	        <view class="share__canvas5-text-2 draw_canvas" data-type="text" data-text="这是一段margin文字">这是一段margin文字</view>
	    </view>
	    <view class="share__title">Canvas: 5</view>
	    <canvas canvas-id="canvas5" class="share__canvas"></canvas>
		<view class="btnView">
			<button class="btn_left" @tap.stop="leftHandle">去自己海报页面</button>
			<button class="btn_right" @tap.stop="rightHandle">触发绘制</button>
		</view>
	</view>
</template>
<script>
import wepy from 'wepy';
import Wxml2Canvas from '@/utils/canvasJS/index';
export default class poster1 extends wepy.page{
	config = {
		navigationBarTitleText: "插件的例子",
		enablePullDownRefresh: false,
	}
	components = {
    }
	data = {
		imgs: [],
		tabbar: null,
	}
	onLoad() {
      
    }
    onShow() {
      
    }
	drawImage1 () {
        let self = this;
        this.drawImage1 = new Wxml2Canvas({
            width: 340,
            height: 210,
            element: 'canvas1',
            background: '#f0f0f0',
            progress (percent) {
            },
            finish(url) {
                // wx.saveImageToPhotosAlbum({  //保存到相册
                // 	filePath: url
                // })
            },
            error (res) {
            }
        });

        let data = {
            list: [{
                type: 'wxml',
                class: '.share__canvas1 .draw_canvas',
                limit: '.share__canvas1',
                x: 0,
                y: 0
            }]
        }
        this.drawImage1.draw(data);
    }
    drawImage2 () {
        let self = this;
        this.drawImage2 = new Wxml2Canvas({
            width: 340,
            height: 210,
            element: 'canvas2',
            background: '#f0f0f0',
            progress (percent) {
            },
            finish(url) {
                // wx.saveImageToPhotosAlbum({
                // 	filePath: url
                // })
            },
            error (res) {
            }
        });

        let data = {
            list: [{
                type: 'wxml',
                class: '.share__canvas2 .draw_canvas',
                limit: '.share__canvas2',
                x: 0,
                y: 0
            }]
        }

        this.drawImage2.draw(data);
    };
    drawImage3 () {
        let self = this;
        this.drawImage3 = new Wxml2Canvas({
            width: 340,
            height: 210,
            element: 'canvas3',
            background: '#f0f0f0',
            progress (percent) {
                // console.log(percent)
            },
            finish(url) {
               
            },
            error (res) {
            }
        });

        let data = {
            list: [{
                type: 'wxml',
                class: '.share__canvas3 .draw_canvas',
                limit: '.share__canvas3',
                x: 0,
                y: 0
            }]
        }

        this.drawImage3.draw(data);
    }
    drawImage4 () {
        let self = this;
        this.drawImage4 = new Wxml2Canvas({
            width: 340,
            height: 400,
            element: 'canvas4',
            background: '#f0f0f0',
            progress (percent) {
                // console.log(percent)
            },
            finish(url) {
              
            },
            error (res) {
            }
        });

        let data = {
            list: [{
                type: 'wxml',
                class: '.share__canvas4 .draw_canvas',
                limit: '.share__canvas4',
                x: 0,
                y: 0
            }]
        }

        this.drawImage4.draw(data);
    };
    drawImage5 () {
        let self = this;
        this.drawImage5 = new Wxml2Canvas({
            width: 340,
            height: 210,
            element: 'canvas5',
            background: '#f0f0f0',
            progress (percent) {
                // console.log(percent)
            },
            finish(url) {
                
            },
            error (res) {
            }
        });

        let data = {
            list: [{
                type: 'wxml',
                class: '.share__canvas5 .draw_canvas',
                limit: '.share__canvas5',
                x: 0,
                y: 0
            }]
        }

        this.drawImage5.draw(data);
    }
	methods = {
		leftHandle() {
			wepy.navigateTo({ url: './poster'})
		},
		rightHandle() {
			this.drawImage1();
			setTimeout(() => {
	            this.drawImage2();
	        }, 300);
	        setTimeout(() => {
	            this.drawImage3();
	        }, 600);
	        setTimeout(() => {
	            this.drawImage4();
	        }, 900);
	        setTimeout(() => {
	            this.drawImage5();
	        }, 1200);
		}
	}
}
</script>
<style lang="less">
	.btnView{
		position: fixed;
		bottom: 0;
		left: 0;
		width: 100%;
		height: 100rpx;
		button{ width: 50%; height: 100rpx; line-height: 100rpx; border-radius: 0; font-size: 30rpx; color: #ffffff;}
		.btn_left{ background-color: #57B8BE; float: left; }
		.btn_right{ background-color: #212121; float: right; }
	}
	.share{
	    width: 100vw;
	    display: flex;
	    flex-direction: column;
	    align-items: center;
	    box-sizing: border-box;
	    padding-top: 40rpx;
	}

	.share__canvas {
	    width: 700rpx;
	    height: 420rpx;
	    background: #f0f0f0;
	    margin-bottom: 120rpx;
	    font-size: 32rpx;
	}

	.share__title {
	    width:100%;
	    margin-left: 80rpx;
	    margin-bottom: 40rpx;
	}

	.share__canvas1-text {
	    color: #000000;
	}

	.share__canvas1-text-2 {
	    color: #ff0000;
	    font-size: 36rpx;
	    margin-left: 20rpx;
	    margin-top: 20rpx;
	}
	.share__canvas1-text-3 {
	    color: #00ff00;
	    padding-left: 40rpx;
	    padding-top: 20rpx;
	}
	.share__canvas1-text-4 {
	    color: #0000ff;
	    margin-left: 20rpx;
	    margin-top: 20rpx;
	    width: 600rpx;
	    text-align: center;
	    background: rgba(255, 0, 0, 0.4);
	    padding: 20rpx;
	}
	.share__canvas1-text-5 {
	    color: #0000ff;
	    margin-left: 20rpx;
	    margin-top: 20rpx;
	    width: 600rpx;
	    background: rgba(255, 0, 0, 0.4);
	    padding: 20rpx;
	}

	.share__canvas2-image {
	    width: 200rpx;
	    height: 120rpx;
	    border: 2px solid #ff0000;
	    margin: 10rpx 20rpx;
	    box-shadow: 20rpx 20rpx 10rpx #cccccc;
	}
	.share__canvas2-image-2 {
	    width: 120rpx;
	    height: 120rpx;
	    border: 2px solid #ff0000;
	    margin: 10rpx 20rpx;
	    box-shadow: 20rpx 20rpx 10rpx #cccccc;
	    border-radius: 100%;
	}
	.share__canvas2-image-3 {
	    width: 200rpx;
	    height: 120rpx;
	    border: 2px solid #ff0000;
	    margin: 10rpx 20rpx;
	    background-size: 200rpx 120rpx;
	}

	.share__canvas3 {
	    padding: 30rpx;
	    box-sizing: border-box;
	}
	.share__canvas3-inline {
	    display: inline;
	    vertical-align: middle;
	    line-height: 50rpx;
	}

	.share__canvas3-inline_bold {
	    font-weight: bold;
	}

	.share__canvas-emoji {
	    width: 42rpx;
	    height: 42rpx;
	    vertical-align: top;
	    padding: 4rpx 0rpx;
	}

	.share__canvas4 {
	    padding: 30rpx;
	    box-sizing: border-box;
	    height: 800rpx;
	}

	.share__canvas4-block {
	    line-height: 50rpx;
	    margin-bottom: 30rpx;
	}

	.share__canvas4-image {
	    width: 200rpx;
	    height: 120rpx;
	    padding: 0 0 20rpx;
	}

	.share__result-img {
	    width: 700rpx;
	    height: 420rpx;
	    margin-bottom: 30rpx;
	}

	.share__result-img-4 {
	    height: 800rpx;
	}

	.share__canvas5 {
	    position: relative;
	}

	.share__canvas5-image {
	    width: 600rpx;
	    height: 360rpx;
	    margin-left: 30rpx
	}

	.share__canvas5-text {
	    position: absolute;
	    bottom: 0;
	    width: 400rpx;
	    margin-left: 100rpx;
	    height: 60rpx;
	    line-height: 60rpx;
	    text-align: center;
	}

	.share__canvas5-text-2 {
	    position: absolute;
	    top: 100rpx;
	    right: 100rpx;
	}

	.share__button {
	    margin-bottom: 30rpx;
	    width: 200rpx;
	}
</style>